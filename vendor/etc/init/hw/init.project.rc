# MTK project .rc configure

import init.c2k.rc

on init
    mkdir /mnt/media_rw/usbotg 0700 media_rw media_rw
    mkdir /storage/usbotg 0700 root root
    mkdir /elabel 0770 system system


on fs
    wait /dev/block/platform/mtk-msdc.0/11230000.msdc0/by-name/elabel
    mount ext4 /dev/block/platform/mtk-msdc.0/11230000.msdc0/by-name/elabel /elabel noatime nosuid nosuid nodev barrier=1
    chown system system /elabel
    restorecon_recursive /elabel

on post-fs-data
#Tp
    mkdir /data/rawdata/ 0766 system system
    chmod 0660 /sys/android_tp/fts_test
    chown system system /sys/android_tp/fts_test
    chmod 0660 /sys/android_tp/tp_double_tab
    chown system system /sys/android_tp/tp_double_tab

    # Emulated internal storage area
    mkdir /data/media 0770 media_rw media_rw
    mkdir /data/media/0 0770 media_rw media_rw
    mkdir /data/media/0/rawdata 0770 media_rw media_rw

#Trustonic
    symlink /persist/00000000.authtokcont /data/misc/mcRegistry/00000000.authtokcont.backup
    chown system system /data/misc/mcRegistry/00000000.authtokcont.backup
    chmod 0666 /data/misc/mcRegistry/00000000.authtokcont.backup

#Camera
    mkdir /vendor/etc/ncf/front  0666 camera system
    mkdir /vendor/etc/ncf/rear  0666 camera system
    mkdir /vendor/etc/ncf/front_second  0666 camera system
    chmod 0660 /dev/MAINAF
    chown system camera /dev/MAINAF

    chmod 0660 /dev/MAINAF2
    chown system camera /dev/MAINAF2

    chmod 0660 /dev/SUBAF
    chown system camera /dev/SUBAF

    chmod 0660 /dev/GAF001AF
    chown system camera /dev/GAF001AF

    chmod 0660 /dev/DW9714AF
    chown system camera /dev/DW9714AF

    chmod 0660 /dev/LC898212AF
    chown system camera /dev/LC898212AF

    chmod 0660 /dev/BU64745GWZAF
    chown system camera /dev/BU64745GWZAF

#SMB
    chown system system /proc/smb/ScreenComm
    chmod 0660 /proc/smb/ScreenComm



# NFC
    chown nfc nfc /dev/sec-nfc
    chmod 0777 /dev/sec-nfc
    mkdir /data/nfc 0770 nfc nfc
    setprop ro.hardware.nfc_nci sec

#    chmod 0660 /dev/spm
#    chown system system /dev/spm


on init
    # Refer to http://source.android.com/devices/tech/storage/index.html
    # It said, "Starting in Android 4.4, multiple external storage devices are surfaced to developers through
    #           Context.getExternalFilesDirs(), Context.getExternalCacheDirs(), and Context.getObbDirs().
    #           External storage devices surfaced through these APIs must be a semi-permanent part of the device (such as an SD card slot in a battery compartment).
    #           Developers expect data stored in these locations to be available over long periods of time."
    # Therefore, if the target doesn't support sd hot-plugging (Ex: the SD card slot in a battery compartment), we need to export SECONDARY_STORAGE in 'boot' section
    #
    # export SECONDARY_STORAGE /storage/sdcard1

service fuse_usbotg /system/bin/sdcard -u 1023 -g 1023 -w 1023 -d /mnt/media_rw/usbotg /storage/usbotg
    class late_start
    disabled


#POWER ON/OFF
on property:sys.boost.enable=1
    write /proc/hps/enabled   0
    write /sys/devices/system/cpu/cpu0/online  1
    write /sys/devices/system/cpu/cpu1/online  1
    write /sys/devices/system/cpu/cpu2/online  1
    write /sys/devices/system/cpu/cpu3/online  1
    write /sys/devices/system/cpu/cpu4/online  1
    write /sys/devices/system/cpu/cpu5/online  1
    write /sys/devices/system/cpu/cpu6/online  1
    write /sys/devices/system/cpu/cpu7/online  1
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "performance"
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor "performance"

on property:sys.boost.enable=0
    write /proc/hps/enabled   0
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "interactive"
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor "interactive"
    write /proc/hps/enabled   1

on early-init
    setprop sys.boost.enable 1

on property:service.bootanim.exit=1
    setprop sys.boost.enable 0

on charger
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "powersave"
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor "powersave"
    write /proc/hps/enabled   1

on property:sys.shutdowning=1
    setprop sys.boost.enable 1

#EMM(LMK)
on property:sys.sysctl.min_free_kbytes=*
   write /proc/sys/vm/min_free_kbytes ${sys.sysctl.min_free_kbytes}

on property:sys.sysctl.lmk_minfree=*
   write /sys/module/lowmemorykiller/parameters/minfree ${sys.sysctl.lmk_minfree}

on property:sys.sysctl.lmk_adj=*
   write /sys/module/lowmemorykiller/parameters/adj ${sys.sysctl.lmk_adj}

#EMM(CPU GOVERNOR)
on property:sys.sysctl.cpu_governor=*
   write /proc/hps/enabled   0
   write /sys/devices/system/cpu/cpu0/online  1
   write /sys/devices/system/cpu/cpu4/online  1
   write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor ${sys.sysctl.cpu_governor}
   write /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor ${sys.sysctl.cpu_governor}
   write /proc/hps/enabled   1

#VMPRESSURE
on property:sys.sysctl.vmpressure_level_med=*
   write /proc/sys/vm/vmpressure_level_med ${sys.sysctl.vmpressure_level_med}

on property:sys.sysctl.vmpressure_level_critical=*
   write /proc/sys/vm/vmpressure_level_critical ${sys.sysctl.vmpressure_level_critical}

#EMM(DROPCACHE & SYNC)
on property:sys.sysctl.drop_caches=*
   write /proc/sys/vm/drop_caches ${sys.sysctl.drop_caches}

on property:sys.sysctl.sync=*
   exec /system/bin/sync

on property:ro.nfc_hw_support=false
    stop nfc_hal_service

#FIH Add for imei backup start
on property:persist.radio.imei=*
   write /proc/AllHWList/imei ${persist.radio.imei}

on property:persist.radio.imei2=*
   write /proc/AllHWList/imei2 ${persist.radio.imei2}
#FIH Add for imei backup end
